<!-- Author: Kobe Dait -->
<!-- File Description: Registration Page -->

<script>
  // Script source from Shane Shimizu
  let params = (new URL(document.location)).searchParams; //gives access to the get decoded query arguments in the URL.
  window.onload = function () { //when the page loads
    if (params.has("RegFirstnameError")) { //if has RegFirstnameError from query
      regError = params.get("RegFirstnameError"); //get the errors from the query and store into variable
      nameLong = '<font color="red">First Name must be 30 characters or less</font>'; //assigns same error message into a variable
      nameNoLetter = '<font color="red">First Name must be letters only</font>'; //assigns same error message into a variable
      if (regError == nameLong) { //if the error received is the same as the error stored in the variable
        document.getElementById("regfirstname").innerHTML = regError; //set inner html to display the register error
      }
      if (regError == nameNoLetter) { //if the error received is the same as the error stored in the variable
        document.getElementById("regfirstname").innerHTML = regError; //set inner html to displayn the register error
      }
    }

    if (params.has("RegLastnameError")) { //if has RegFirstnameError from query
      regError = params.get("RegLastnameError"); //get the errors from the query and store into variable
      nameLong = '<font color="red">Last Name must be 30 characters or less</font>'; //assigns same error message into a variable
      nameNoLetter = '<font color="red">Last Name must be letters only</font>'; //assigns same error message into a variable
      if (regError == nameLong) { //if the error received is the same as the error stored in the variable
        document.getElementById("reglastname").innerHTML = regError; //set inner html to display the register error
      }
      if (regError == nameNoLetter) { //if the error received is the same as the error stored in the variable
        document.getElementById("reglastname").innerHTML = regError; //set inner html to displayn the register error
      }
    }

    if (params.has("RegPasswordError")) { //if has RegPasswordError from query 
      regError2 = params.get("RegPasswordError"); //get the errors from the query and store into variable
      passNoMatch = '<font color="red">Password DOES NOT Match</font>'; //assigns same error into a variable
      passLength = '<font color="red">Password must be at least six characters</font>'; //assigns same error into a variable
      if (regError2 == passLength) { //if the error received is the same as the error stored in the variable
        document.getElementById("regpassword").innerHTML = regError2; //set inner html to displayn the register error
      }
      if (regError2 == passNoMatch) { //if the error received is the same as the error stored in the variable
        document.getElementById("regrepeatpassword").innerHTML = regError2; //set inner html to displayn the register error
      }
    }

    if (params.has("RegUsernameError")) { //if has RegUsernameError from query 
      regError3 = params.get("RegUsernameError"); //get the errors from the query and store into variable
      useNumLet = '<font color="red">Username must be characters and numbers only</font>'; //assigns same error into a variable
      useLong = '<font color="red">Username must be ten characters or less</font>'; //assigns same error into a variable
      useShort = '<font color="red">Username must be at least four characters</font>'; //assigns same error into a variable
      useTaken = '<font color="red">User already registered</font>'; //assigns same error into a variable
      if (regError3 == useNumLet) { //if the error received is the same as the error stored in the variable
        document.getElementById("regusername").innerHTML = regError3; //set inner html to displayn the register error
      }
      if (regError3 == useLong) { //if the error received is the same as the error stored in the variable
        document.getElementById("regusername").innerHTML = regError3; //set inner html to displayn the register error
      }
      if (regError3 == useShort) { //if the error received is the same as the error stored in the variable
        document.getElementById("regusername").innerHTML = regError3; //set inner html to displayn the register error
      }
      if (regError3 == useTaken) {
        document.getElementById("regusername").innerHTML = regError3; //set inner html to displayn the register error
      }
    }

    if (params.has("RegEmailError")) { //if has RegEmailError from query
      regError4 = params.get("RegEmailError"); //get the errors from the query and store into variable
      emailInvalid = '<font color="red">Email is invalid</font>'; //assigns same error into a variable
      if (regError4 == emailInvalid) { //if the error received is the same as the error stored in the variable
        document.getElementById("regemail").innerHTML = regError4; //set inner html to displayn the register error
      }
    }

    if (params.has("RegBirthdayError")) { //if has RegEmailError from query
      regError4 = params.get("RegBirthdayError"); //get the errors from the query and store into variable
      birthdayInvalid = '<font color="red">Birthday date must be before today</font>'; //assigns same error into a variable
      if (regError4 == birthdayInvalid) { //if the error received is the same as the error stored in the variable
        document.getElementById("regbirthday").innerHTML = regError4; //set inner html to displayn the register error
      }
    }

    if (params.has("stickRegFirstname")) { //if has stickRegFirstname
      showRegFirstname = params.get("stickRegFirstname"); //get the info from the query and store into variable
      document.getElementById("regfirstnamebox").value = showRegFirstname; //sets the value to the inoput of the useer
    }

    if (params.has("stickRegLastname")) { //if has stickRegLastname
      showRegLastname = params.get("stickRegLastname"); //get the info from the query and store into variable
      document.getElementById("reglastnamebox").value = showRegLastname; //sets the value to the inoput of the useer
    }

    if (params.has("stickUsername")) { //if has stickRegFirstname
      showUsername = params.get("stickUsername"); //get the info from the query and store into variable
      document.getElementById("regusernamebox").value = showUsername; //sets the value to the input of the user
    }

    if (params.has("stickEmail")) { //if has stickEmail
      showEmail = params.get("stickEmail"); //get the info from the query and store into variable
      document.getElementById("regemailbox").value = showEmail; //set the value to the input of the user
    }

    if (params.has("stickBirthday")) { //if has stickEmail
      showBirthday = params.get("stickBirthday"); //get the info from the query and store into variable
      document.getElementById("regbirthdaybox").value = showBirthday; //set the value to the input of the user
    }
  }
</script>

<!-- Some HTML format sourced from https://darkcode1.blogspot.com/2019/07/animated-login-form-using-html-css.html -->

<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>Register</title>
  <link rel="stylesheet" href="loyalty.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" charset="utf-8"></script>
</head>

<body>
  <!-- Each div has an input box for registration -->
  <form id="register_form" class="loyalty-form" method="POST">
    <h1>Sign Up!</h1>
    <div class="txtb">
      <input id="regfirstnamebox" type="text" name="firstname" required>
      <span data-placeholder="First Name"></span>
    </div>
    <div id="regfirstname"></div>

    <div class="txtb">
      <input id="reglastnamebox" type="text" name="lastname" required>
      <span data-placeholder="Last Name"></span>
    </div>
    <div id="reglastname"></div>

    <div class="txtb">
      <input id="regusernamebox" type="text" name="username" required>
      <span data-placeholder="Username"></span>
    </div>
    <div id="regusername"></div>

    <div class="txtb">
      <input id="regemailbox" type="text" name="email" required>
      <span data-placeholder="Email"></span>
    </div>
    <div id="regemail"></div>

    <div class="txtb">
      <input id="regbirthdaybox" type="date" name="birthday" required>
      <span data-placeholder="Birthday"></span>
    </div>
    <div id="regbirthday"></div>

    <div class="txtb">
      <input type="password" name="password" required>
      <span data-placeholder="Password"></span>
    </div>
    <div id="regpassword"></div>

    <div class="txtb">
      <input type="password" name="repeat_password" required>
      <span data-placeholder="Confirm Password"></span>
    </div>
    <div id="regrepeatpassword"></div>
    <br>
    <input name="register_submit_button" type="submit" class="logbtn" value="Register">
  </form>

  <!-- Script sourced from https://darkcode1.blogspot.com/2019/07/animated-login-form-using-html-css.html -->
  <script type="text/javascript">
    // Creates the animaitons on Login form
    $(".txtb input").on("focus", function () {
      $(this).addClass("focus");
    });

    $(".txtb input").on("blur", function () {
      if ($(this).val() == "")
        $(this).removeClass("focus");
    });
  </script>
</body>

</html>
<script>
  // Source from Shane Shimizu
  // Sets link with quantity data to pass to next page
  register_form.action = "/customer_register" + document.location.search;
</script>